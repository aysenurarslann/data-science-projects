# -*- coding: utf-8 -*-
"""Copy_of_titanic_homework (1).ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1vfVHF_pILqfjLm8afZgdihCqtjfJ3ZLU

# ğŸš¢ Titanic Veri Seti Analizi Ã–devi

Bu Ã¶devde Titanic veri seti Ã¼zerinde pandas kÃ¼tÃ¼phanesi kullanarak veri analizi yapacaksÄ±nÄ±z. Sorular kolay seviyeden baÅŸlayarak zorlaÅŸmaktadÄ±r.

## ğŸ“‹ Ã–dev KurallarÄ±:
- Her soruyu ayrÄ± bir hÃ¼crede Ã§Ã¶zÃ¼n
- KodlarÄ±nÄ±zÄ± aÃ§Ä±klayÄ±cÄ± yorumlarla destekleyin
- SonuÃ§larÄ± yorumlayÄ±n
- Grafik Ã§izilebilecek yerlerde gÃ¶rselleÅŸtirme yapÄ±n

## ğŸ“Š Veri Seti HakkÄ±nda:
Titanic veri seti, 1912'de batan Titanic gemisindeki yolcular hakkÄ±nda bilgi iÃ§erir.

**SÃ¼tun AÃ§Ä±klamalarÄ±:**
- `survived`: Hayatta kalma durumu (0 = HayÄ±r, 1 = Evet)
- `pclass`: Yolcu sÄ±nÄ±fÄ± (1 = 1. sÄ±nÄ±f, 2 = 2. sÄ±nÄ±f, 3 = 3. sÄ±nÄ±f)
- `sex`: Cinsiyet
- `age`: YaÅŸ
- `sibsp`: Gemide bulunan kardeÅŸ/eÅŸ sayÄ±sÄ±
- `parch`: Gemide bulunan ebeveyn/Ã§ocuk sayÄ±sÄ±
- `ticket`: Bilet numarasÄ±
- `fare`: Bilet Ã¼creti
- `cabin`: Kabin numarasÄ±
- `embarked`: BindiÄŸi liman (C = Cherbourg, Q = Queenstown, S = Southampton)

---
# âœ… TEMEL SEVÄ°YE SORULAR (KOLAY)
---

### Soru 1: Veri setinde kaÃ§ satÄ±r ve kaÃ§ sÃ¼tun olduÄŸunu bulun.
"""

# Kodunuzu buraya yazÄ±n
# Pandas kÃ¼tÃ¼phanesini iÃ§e aktar
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Titanic veri setini GitHub'dan oku ve DataFrame'e yÃ¼kle
df = pd.read_csv("https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv")

# Veri setinin boyutunu gÃ¶ster (satÄ±r sayÄ±sÄ±, sÃ¼tun sayÄ±sÄ±)
df.shape
# Grafik ayarlarÄ±
plt.style.use('seaborn-v0_8')
plt.rcParams['figure.figsize'] = (10, 6)

"""### Soru 2: TÃ¼m sÃ¼tun isimlerini yazdÄ±rÄ±n."""

# Kodunuzu buraya yazÄ±n
df.columns

"""### Soru 3: YaÅŸ ortalamasÄ±nÄ± ve medyanÄ±nÄ± hesaplayÄ±n."""

# Kodunuzu buraya yazÄ±n
# YaÅŸ sÃ¼tununun ortalamasÄ±nÄ± hesapla
yas_ortalama = df['Age'].dropna().mean()

# YaÅŸ sÃ¼tununun medyanÄ±nÄ± hesapla
yas_medyan = df['Age'].dropna().median()   # dropna()
print(f"YaÅŸ ortalamasÄ±: {yas_ortalama:.2f}")
print(f"YaÅŸ medyanÄ±: {yas_medyan:.2f}")

plt.figure(figsize=(12, 4))
plt.subplot(1, 2, 1)
plt.hist(df['Age'].dropna(), bins=30, alpha=0.7, color='skyblue')
plt.axvline(yas_ortalama, color='red', linestyle='--', label=f'Ortalama: {yas_ortalama:.1f}')
plt.axvline(yas_medyan, color='green', linestyle='--', label=f'Medyan: {yas_medyan:.1f}')
plt.xlabel('YaÅŸ')
plt.ylabel('Frekans')
plt.title('YaÅŸ DaÄŸÄ±lÄ±mÄ±')
plt.legend()

plt.subplot(1, 2, 2)
plt.boxplot(df['Age'].dropna())
plt.ylabel('YaÅŸ')
plt.title('YaÅŸ Box Plot')
plt.tight_layout()
plt.show()

"""### Soru 4: Cinsiyet deÄŸiÅŸkenindeki eÅŸsiz deÄŸerleri yazdÄ±rÄ±n."""

# Kodunuzu buraya yazÄ±n

print("Cinsiyet deÄŸiÅŸkenindeki eÅŸsiz deÄŸerler:", df['Sex'].unique())

"""### Soru 5: `pclass` deÄŸiÅŸkenindeki deÄŸerlerin yÃ¼zdesel daÄŸÄ±lÄ±mÄ±nÄ± yazdÄ±rÄ±n."""

# Kodunuzu buraya yazÄ±n
print(df['Pclass'].value_counts(normalize=True) * 100) # value_counts() - Her deÄŸerin kaÃ§ kere geÃ§tiÄŸini sayar

"""### Soru 6: YaÅŸÄ± 30'dan bÃ¼yÃ¼k kadÄ±n yolcularÄ± listeleyin."""

# Kodunuzu buraya yazÄ±n
# Filtreleme
kadin_30_ustu = df[(df['Age'] > 30) & (df['Sex'] == 'female')]


print(kadin_30_ustu[['Name', 'Age', 'Sex', 'Pclass']])

"""### Soru 7: YaÅŸÄ± 18'den kÃ¼Ã§Ã¼k olup 1. sÄ±nÄ±fta yolculuk eden yolcularÄ± listeleyin."""

# Kodunuzu buraya yazÄ±n
genc_birinci_sinif = df[(df['Age'] < 18) & (df['Pclass'] == 1)]

print(genc_birinci_sinif[['Name', 'Age', 'Sex', 'Pclass', 'Survived']])

"""### Soru 8: Ä°lk 10 gÃ¶zlemden son 3'Ã¼nÃ¼ gÃ¶sterin."""

# Kodunuzu buraya yazÄ±n
# Ä°lk 10'dan son 3'Ã¼
print(df.head(10).tail(3))

"""### Soru 9: Bilet fiyatÄ± (fare) 100'den bÃ¼yÃ¼k olan kaÃ§ kiÅŸi vardÄ±r?"""

# Kodunuzu buraya yazÄ±n
# Bilet fiyatÄ± 100'den bÃ¼yÃ¼k olanlarÄ±n sayÄ±sÄ±
print(len(df[df['Fare'] > 100]))

"""### Soru 10: `sex`, `age` ve `fare` sÃ¼tunlarÄ±ndan oluÅŸan yeni bir DataFrame oluÅŸturun."""

# Kodunuzu buraya yazÄ±n
yeni_df = df[['Sex', 'Age', 'Fare']]
print(yeni_df.head())

"""---
# âš™ï¸ ORTA SEVÄ°YE SORULAR
---

### Soru 1: Cinsiyete gÃ¶re yaÅŸ ortalamasÄ±nÄ± bulun.
"""

# Kodunuzu buraya yazÄ±n
cinsiyet_yas = df.groupby('Sex')['Age'].mean()
print(cinsiyet_yas)



# GÃ–RSELLEÅTÄ°RME
plt.figure(figsize=(8, 5))
cinsiyet_yas.plot(kind='bar', color=['pink', 'lightblue'])
plt.title('Cinsiyete GÃ¶re Ortalama YaÅŸ')
plt.ylabel('Ortalama YaÅŸ')
plt.xlabel('Cinsiyet')
plt.xticks(rotation=0)
plt.show()

"""### Soru 2: SÄ±nÄ±fa gÃ¶re hayatta kalan kiÅŸi sayÄ±sÄ±nÄ± bulun."""

# Kodunuzu buraya yazÄ±n
sinif_hayatta = df.groupby('Pclass')['Survived'].sum()
print(sinif_hayatta)

# YORUM
print("\n YORUM:")
print("- 1. sÄ±nÄ±f yolcularÄ±nÄ±n hayatta kalma sayÄ±sÄ± en yÃ¼ksek")
print("- 3. sÄ±nÄ±fta daha Ã§ok yolcu olmasÄ±na raÄŸmen hayatta kalan sayÄ±sÄ± az")
print("- Sosyal sÄ±nÄ±fÄ±n hayatta kalmada bÃ¼yÃ¼k etkisi var")

# GÃ–RSELLEÅTÄ°RME
plt.figure(figsize=(10, 4))
plt.subplot(1, 2, 1)
sinif_hayatta.plot(kind='bar', color=['gold', 'silver', 'brown'])
plt.title('SÄ±nÄ±fa GÃ¶re Hayatta Kalan SayÄ±sÄ±')
plt.ylabel('Hayatta Kalan SayÄ±sÄ±')
plt.xlabel('Yolcu SÄ±nÄ±fÄ±')
plt.xticks(rotation=0)

plt.subplot(1, 2, 2)
sinif_orani = df.groupby('Pclass')['Survived'].mean()
sinif_orani.plot(kind='bar', color=['gold', 'silver', 'brown'])
plt.title('SÄ±nÄ±fa GÃ¶re Hayatta Kalma OranÄ±')
plt.ylabel('Hayatta Kalma OranÄ±')
plt.xlabel('Yolcu SÄ±nÄ±fÄ±')
plt.xticks(rotation=0)
plt.tight_layout()
plt.show()

"""### Soru 3: Hem cinsiyet hem sÄ±nÄ±fa gÃ¶re hayatta kalma oranlarÄ±nÄ± hesaplayÄ±n."""

# Kodunuzu buraya yazÄ±n
print("\n CÄ°NSÄ°YET VE SINIFA GÃ–RE HAYATTA KALMA ORANLARI")
cinsiyet_sinif = df.groupby(['Sex', 'Pclass'])['Survived'].mean()
print(cinsiyet_sinif)

# YORUM
print("\nYORUM:")
print("- KadÄ±nlar her sÄ±nÄ±fta erkeklerden daha yÃ¼ksek hayatta kalma oranÄ±na sahip")
print("- 'KadÄ±nlar ve Ã§ocuklar Ã¶nce' kuralÄ±nÄ±n uygulandÄ±ÄŸÄ± gÃ¶rÃ¼lÃ¼yor")
print("- 1. sÄ±nÄ±f kadÄ±nlarda hayatta kalma oranÄ± %96, 3. sÄ±nÄ±f erkeklerde %13")

# GÃ–RSELLEÅTÄ°RME
plt.figure(figsize=(10, 6))
cinsiyet_sinif_pivot = df.pivot_table(values='Survived', index='Pclass', columns='Sex', aggfunc='mean')
sns.heatmap(cinsiyet_sinif_pivot, annot=True, fmt='.2f', cmap='RdYlGn')
plt.title('Cinsiyet ve SÄ±nÄ±fa GÃ¶re Hayatta Kalma OranlarÄ±')
plt.ylabel('Yolcu SÄ±nÄ±fÄ±')
plt.xlabel('Cinsiyet')
plt.show()

"""### Soru 4: Embarked deÄŸiÅŸkenine gÃ¶re ortalama yaÅŸ ve ortalama Ã¼cret nedir?"""

# Kodunuzu buraya yazÄ±n
print(df.groupby('Embarked')[['Age', 'Fare']].mean())

"""### Soru 5: Pclass gruplarÄ±na gÃ¶re yaÅŸÄ±n standart sapmasÄ±nÄ± bulun."""

# Kodunuzu buraya yazÄ±n
print(df.groupby('Pclass')['Age'].std())

"""### Soru 6: Her `Embarked` limanÄ±ndan kaÃ§ yolcu olduÄŸunu ve bunlarÄ±n yÃ¼zdelik daÄŸÄ±lÄ±mÄ±nÄ± yazdÄ±rÄ±n."""

# Kodunuzu buraya yazÄ±n
print(df['Embarked'].value_counts())
print(df['Embarked'].value_counts(normalize=True) * 100)

"""### Soru 7: YaÅŸÄ± 60'tan bÃ¼yÃ¼k olanlarÄ±n hayatta kalma oranÄ±nÄ± bulun."""

# Kodunuzu buraya yazÄ±n
print(df[df['Age'] > 60]['Survived'].mean())

"""### Soru 8: `Sex`, `Pclass`, `Survived` iÃ§in `groupby()` + `agg()` ile ortalama yaÅŸ ve Ã¼cret hesaplayÄ±n."""

# Kodunuzu buraya yazÄ±n
print(df.groupby(['Sex', 'Pclass', 'Survived']).agg({'Age': 'mean', 'Fare': 'mean'}))

"""### Soru 9: Age deÄŸiÅŸkenini artan dÃ¼zende sÄ±ralayÄ±n ve ilk 10 kiÅŸiyi yazdÄ±rÄ±n."""

# Kodunuzu buraya yazÄ±n
# YaÅŸa gÃ¶re sÄ±rala ve ilk 10'u al
en_genc_10 = df.sort_values('Age', ascending=True).head(10)
print(en_genc_10[['Name', 'Age', 'Sex', 'Pclass']])

"""---
# ğŸ§  KÄ°RLENMEK GÃœZELDÄ°R SORULARI :)
---

### Soru 1: En pahalÄ± bileti alan kiÅŸinin yaÅŸÄ±, cinsiyeti ve sÄ±nÄ±fÄ± nedir?
"""

# Kodunuzu buraya yazÄ±n
# En pahalÄ± bileti alan kiÅŸinin bilgileri
en_pahali = df[df['Fare'] == df['Fare'].max()]
print(en_pahali[['Name', 'Age', 'Sex', 'Pclass', 'Fare']])

# YORUM
print("\nYORUM:")
print("- En pahalÄ± bilet 512.33 sterlin")
print("- 1. sÄ±nÄ±f yolcusu, muhtemelen lÃ¼ks sÃ¼it")

"""### Soru 2: Hayatta kalanlar ile Ã¶lenler arasÄ±nda yaÅŸ ortalamalarÄ± farkÄ± nedir?"""

# Kodunuzu buraya yazÄ±n
# Hayatta kalanlar ile Ã¶lenler arasÄ±nda yaÅŸ ortalamalarÄ± farkÄ±
hayatta_kalanlar = df[df['Survived'] == 1]['Age'].mean()
olenler = df[df['Survived'] == 0]['Age'].mean()

"""### Soru 3: Hangi `Pclass` grubunda kadÄ±nlarÄ±n hayatta kalma oranÄ± en yÃ¼ksektir?"""

# Kodunuzu buraya yazÄ±n
# KadÄ±nlarÄ±n sÄ±nÄ±flara gÃ¶re hayatta kalma oranÄ±
kadinlar = df[df['Sex'] == 'female']
oranlar = kadinlar.groupby('Pclass')['Survived'].mean()
print(oranlar)
print(f"En yÃ¼ksek oran: {oranlar.idxmax()}. sÄ±nÄ±f (%{oranlar.max()*100:.1f})")

"""### Soru 4: Ortalama yaÅŸÄ±n altÄ±nda olan ve hayatta kalan erkeklerin sayÄ±sÄ± kaÃ§tÄ±r?"""

# Kodunuzu buraya yazÄ±n
# Ortalama yaÅŸÄ±n altÄ±nda olan erkeklerin sayÄ±sÄ±
ortalama_yas = df['Age'].mean()
erkekler = df[(df['Sex'] == 'male') & (df['Age'] < ortalama_yas)]
print(len(erkekler[erkekler['Survived'] == 1]))

"""### Soru 5: `Cabin` deÄŸeri eksik olmayanlarÄ±n yaÅŸ ortalamasÄ± ile eksik olanlarÄ±n yaÅŸ ortalamasÄ± arasÄ±nda fark var mÄ±?"""

# Kodunuzu buraya yazÄ±n
# Cabin deÄŸeri eksik olmayanlarÄ±n yaÅŸ ortalamasÄ±
cabin_dolu = df[~df['Cabin'].isnull()]['Age'].mean()

# Cabin deÄŸeri eksik olanlarÄ±n yaÅŸ ortalamasÄ±
cabin_bos = df[df['Cabin'].isnull()]['Age'].mean()

print(f"Cabin dolu yaÅŸ ortalamasÄ±: {cabin_dolu:.2f}")
print(f"Cabin boÅŸ yaÅŸ ortalamasÄ±: {cabin_bos:.2f}")
print(f"Fark: {cabin_dolu - cabin_bos:.2f}")

"""### Soru 6: `.describe()` Ã§Ä±ktÄ±sÄ±na gÃ¶re Ã§arpÄ±klÄ±k var mÄ±? Hangi deÄŸiÅŸkenlerde?"""

# Kodunuzu buraya yazÄ±n
# Her sayÄ±sal deÄŸiÅŸken iÃ§in Ã§arpÄ±klÄ±k kontrolÃ¼
numerical_cols = ['Age', 'SibSp', 'Parch', 'Fare']

for col in numerical_cols:
    data = df[col].dropna()  # NaN deÄŸerleri Ã§Ä±kar
    mean_val = data.mean()
    median_val = data.median()

    print(f"\n{col.upper()}:")
    print(f"  Ortalama: {mean_val:.2f}")
    print(f"  Medyan: {median_val:.2f}")

    # Ã‡arpÄ±klÄ±k testi
    if abs(mean_val - median_val) > 0.5:
        if mean_val > median_val:
            print(f"  â†’ SAÄ Ã‡ARPIK (Pozitif Ã§arpÄ±klÄ±k)")
        else:
            print(f"  â†’ SOL Ã‡ARPIK (Negatif Ã§arpÄ±klÄ±k)")
    else:
        print(f"  â†’ NORMAL DAÄILIM (Ã‡arpÄ±klÄ±k yok)")

# Skewness deÄŸerlerini hesapla
print("\n=== SKEWNESS DEÄERLERÄ° ===")
for col in numerical_cols:
    skew_val = df[col].skew()
    print(f"{col}: {skew_val:.3f}")
    if abs(skew_val) > 1:
        print(f"  â†’ YÃ¼ksek Ã§arpÄ±klÄ±k")
    elif abs(skew_val) > 0.5:
        print(f"  â†’ Orta Ã§arpÄ±klÄ±k")
    else:
        print(f"  â†’ DÃ¼ÅŸÃ¼k Ã§arpÄ±klÄ±k")

"""### Soru 7: Veri setindeki en fazla tekrarlanan yaÅŸ deÄŸeri (mod) nedir?"""

# Kodunuzu buraya yazÄ±n
# En fazla tekrarlanan yaÅŸ deÄŸeri (mod)
en_cok_tekrarlanan_yas = df['Age'].mode()[0]
print(f"En fazla tekrarlanan yaÅŸ deÄŸeri: {en_cok_tekrarlanan_yas}")

"""### Soru 8: Ortalama bilet fiyatÄ± kadÄ±nlar mÄ± yoksa erkekler iÃ§in mi daha yÃ¼ksek?"""

# Kodunuzu buraya yazÄ±n
cinsiyet_fare = df.groupby('Sex')['Fare'].mean()
print(cinsiyet_fare)

# YORUM
print("\n YORUM:")
fark = cinsiyet_fare['female'] - cinsiyet_fare['male']
print(f"- KadÄ±nlar erkeklerden ortalama ${fark:.2f} daha fazla Ã¶demiÅŸ")
print("- Muhtemelen kadÄ±nlar daha yÃ¼ksek sÄ±nÄ±flarda seyahat etmiÅŸ")

# GÃ–RSELLEÅTÄ°RME
plt.figure(figsize=(12, 5))
plt.subplot(1, 2, 1)
cinsiyet_fare.plot(kind='bar', color=['pink', 'lightblue'])
plt.title('Cinsiyete GÃ¶re Ortalama Bilet FiyatÄ±')
plt.ylabel('Ortalama Bilet FiyatÄ± ($)')
plt.xlabel('Cinsiyet')
plt.xticks(rotation=0)

plt.subplot(1, 2, 2)
df.boxplot(column='Fare', by='Sex')
plt.title('Cinsiyete GÃ¶re Bilet FiyatÄ± DaÄŸÄ±lÄ±mÄ±')
plt.ylabel('Bilet FiyatÄ± ($)')
plt.suptitle('')
plt.tight_layout()
plt.show()

# GENEL HAYATTA KALMA ANALÄ°ZÄ°

hayatta_kalma_orani = df['Survived'].mean()
print(f"Genel hayatta kalma oranÄ±: %{hayatta_kalma_orani*100:.1f}")

# GÃ–RSELLEÅTÄ°RME
plt.figure(figsize=(12, 8))

plt.subplot(2, 2, 1)
df['Survived'].value_counts().plot(kind='pie', autopct='%1.1f%%', labels=['Ã–ldÃ¼', 'YaÅŸadÄ±'])
plt.title('Hayatta Kalma OranÄ±')

plt.subplot(2, 2, 2)
df.groupby('Sex')['Survived'].mean().plot(kind='bar', color=['pink', 'lightblue'])
plt.title('Cinsiyete GÃ¶re Hayatta Kalma')
plt.ylabel('Hayatta Kalma OranÄ±')
plt.xticks(rotation=0)

plt.subplot(2, 2, 3)
df.groupby('Pclass')['Survived'].mean().plot(kind='bar', color=['gold', 'silver', 'brown'])
plt.title('SÄ±nÄ±fa GÃ¶re Hayatta Kalma')
plt.ylabel('Hayatta Kalma OranÄ±')
plt.xticks(rotation=0)

plt.subplot(2, 2, 4)
df.groupby('Embarked')['Survived'].mean().plot(kind='bar', color=['red', 'green', 'blue'])
plt.title('Limana GÃ¶re Hayatta Kalma')
plt.ylabel('Hayatta Kalma OranÄ±')
plt.xticks(rotation=0)

plt.tight_layout()
plt.show()

print("- Titanic faciasÄ±nda sosyal sÄ±nÄ±f ve cinsiyet hayatta kalmada kritik faktÃ¶rler")
print("- 'KadÄ±nlar ve Ã§ocuklar Ã¶nce' kuralÄ± bÃ¼yÃ¼k Ã¶lÃ§Ã¼de uygulanmÄ±ÅŸ")
print("- Ãœst sÄ±nÄ±f yolcularÄ±nÄ±n hayatta kalma ÅŸansÄ± Ã§ok daha yÃ¼ksek")

